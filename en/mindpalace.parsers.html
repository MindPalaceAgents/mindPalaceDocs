<!-- layout.html -->


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mindpalace.parsers &mdash; MindPalace  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=c9484b72" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="mindpalace.exception" href="mindpalace.exception.html" />
    <link rel="prev" title="mindpalace.memory" href="mindpalace.memory.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" > 

          
          
          <a href="index.html" class="icon icon-home">
            MindPalace
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div> <!-- language_selector.html -->
<div class="language-selector">
    <a href="../en/mindpalace.parsers.html">English</a></li> |
    <a href="../zh_CN/mindpalace.parsers.html">中文</a></li>
</div> 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">MindPalace Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial/102-installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/103-example.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/203-model.html">Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/203-stream.html">Streaming</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/206-prompt.html">Prompt Engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/201-agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/205-memory.html">Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/203-parser.html">Response Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/209-prompt_opt.html">System Prompt Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/204-service.html">Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/202-pipeline.html">Pipeline and MsgHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/208-distribute.html">Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/209-gui.html">MindPalace Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/210-rag.html">A Quick Introduction to RAG in MindPalace</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/211-web.html">Web Browser Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/105-logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/207-monitor.html">Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/104-usecase.html">Example: Werewolf Game</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/contribute.html">Get Involved</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MindPalace API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mindpalace.html">mindpalace</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.message.html">mindpalace.message</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.models.html">mindpalace.models</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.agents.html">mindpalace.agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.memory.html">mindpalace.memory</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">mindpalace.parsers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.parsers.ParserBase"><code class="docutils literal notranslate"><span class="pre">ParserBase</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.parsers.MarkdownJsonObjectParser"><code class="docutils literal notranslate"><span class="pre">MarkdownJsonObjectParser</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.parsers.MarkdownJsonDictParser"><code class="docutils literal notranslate"><span class="pre">MarkdownJsonDictParser</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.parsers.MarkdownCodeBlockParser"><code class="docutils literal notranslate"><span class="pre">MarkdownCodeBlockParser</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.parsers.TaggedContent"><code class="docutils literal notranslate"><span class="pre">TaggedContent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.parsers.MultiTaggedContentParser"><code class="docutils literal notranslate"><span class="pre">MultiTaggedContentParser</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.parsers.RegexTaggedContentParser"><code class="docutils literal notranslate"><span class="pre">RegexTaggedContentParser</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.exception.html">mindpalace.exception</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.pipelines.html">mindpalace.pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.service.html">mindpalace.service</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.rpc.html">mindpalace.rpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.server.html">mindpalace.server</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.web.html">mindpalace.web</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.prompt.html">mindpalace.prompt</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.utils.html">mindpalace.utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindPalace</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">mindpalace.parsers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/mindpalace.parsers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-mindpalace.parsers">
<span id="mindpalace-parsers"></span><h1>mindpalace.parsers<a class="headerlink" href="#module-mindpalace.parsers" title="Link to this heading"></a></h1>
<p>Model response parser module.</p>
<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.parsers.ParserBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.parsers.</span></span><span class="sig-name descname"><span class="pre">ParserBase</span></span><a class="reference internal" href="_modules/mindpalace/parsers/parser_base.html#ParserBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.ParserBase" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>The base class for model response parser.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.ParserBase.parse">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></span><a class="reference internal" href="_modules/mindpalace/parsers/parser_base.html#ParserBase.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.ParserBase.parse" title="Link to this definition"></a></dt>
<dd><p>Parse the response text to a specific object, and stored in the
parsed field of the response object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonObjectParser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.parsers.</span></span><span class="sig-name descname"><span class="pre">MarkdownJsonObjectParser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/parsers/json_object_parser.html#MarkdownJsonObjectParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonObjectParser" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="mindpalace.parsers.parser_base.html#mindpalace.parsers.parser_base.ParserBase" title="mindpalace.parsers.parser_base.ParserBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParserBase</span></code></a></p>
<p>A parser to parse the response text to a json object.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonObjectParser.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'json</span> <span class="pre">block'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonObjectParser.name" title="Link to this definition"></a></dt>
<dd><p>The name of the parser.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonObjectParser.tag_begin">
<span class="sig-name descname"><span class="pre">tag_begin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'```json'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonObjectParser.tag_begin" title="Link to this definition"></a></dt>
<dd><p>Opening tag for a code block.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonObjectParser.tag_end">
<span class="sig-name descname"><span class="pre">tag_end</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'```'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonObjectParser.tag_end" title="Link to this definition"></a></dt>
<dd><p>Closing end for a code block.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonObjectParser.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/parsers/json_object_parser.html#MarkdownJsonObjectParser.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonObjectParser.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the parser with the content hint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>content_hint</strong> (<cite>Optional[Any]</cite>, defaults to <cite>None</cite>) – The hint used to remind LLM what should be fill between the
tags. If it is a string, it will be used as the content hint
directly. If it is a dict, it will be converted to a json
string and used as the content hint.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonObjectParser.content_hint">
<span class="sig-name descname"><span class="pre">content_hint</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'{your_json_object}'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonObjectParser.content_hint" title="Link to this definition"></a></dt>
<dd><p>The hint of the content.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonObjectParser.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></span><a class="reference internal" href="_modules/mindpalace/parsers/json_object_parser.html#MarkdownJsonObjectParser.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonObjectParser.parse" title="Link to this definition"></a></dt>
<dd><p>Parse the response text to a json object, and fill it in the parsed
field in the response object.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonObjectParser.format_instruction">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_instruction</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonObjectParser.format_instruction" title="Link to this definition"></a></dt>
<dd><p>Get the format instruction for the json object, if the
format_example is provided, it will be used as the example.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonDictParser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.parsers.</span></span><span class="sig-name descname"><span class="pre">MarkdownJsonDictParser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_memory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/parsers/json_object_parser.html#MarkdownJsonDictParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonDictParser" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="mindpalace.parsers.json_object_parser.html#mindpalace.parsers.json_object_parser.MarkdownJsonObjectParser" title="mindpalace.parsers.json_object_parser.MarkdownJsonObjectParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">MarkdownJsonObjectParser</span></code></a>, <a class="reference internal" href="mindpalace.parsers.parser_base.html#mindpalace.parsers.parser_base.DictFilterMixin" title="mindpalace.parsers.parser_base.DictFilterMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">DictFilterMixin</span></code></a></p>
<p>A class used to parse a JSON dictionary object in a markdown fenced
code</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonDictParser.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'json</span> <span class="pre">block'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonDictParser.name" title="Link to this definition"></a></dt>
<dd><p>The name of the parser.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonDictParser.tag_begin">
<span class="sig-name descname"><span class="pre">tag_begin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'```json'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonDictParser.tag_begin" title="Link to this definition"></a></dt>
<dd><p>Opening tag for a code block.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonDictParser.tag_end">
<span class="sig-name descname"><span class="pre">tag_end</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'```'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonDictParser.tag_end" title="Link to this definition"></a></dt>
<dd><p>Closing end for a code block.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonDictParser.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_memory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/parsers/json_object_parser.html#MarkdownJsonDictParser.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonDictParser.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the parser with the content hint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content_hint</strong> (<cite>Optional[Any]</cite>, defaults to <cite>None</cite>) – The hint used to remind LLM what should be fill between the
tags. If it is a string, it will be used as the content hint
directly. If it is a dict, it will be converted to a json
string and used as the content hint. If it’s a Pydantic model,
the schema will be displayed in the instruction.</p></li>
<li><p><strong>required_keys</strong> (<cite>List[str]</cite>, defaults to <cite>[]</cite>) – A list of required keys in the JSON dictionary object. If the
response misses any of the required keys, it will raise a
RequiredFieldNotFoundError.</p></li>
<li><p><strong>(</strong><strong>`Optional</strong><strong>[</strong><strong>Union</strong><strong>[</strong><strong>str</strong> (<em>keys_to_memory</em>) – </p></li>
<li><p><strong>bool</strong></p></li>
<li><p><strong>Sequence</strong><strong>[</strong><strong>str</strong><strong>]</strong><strong>]</strong><strong>]</strong><strong>`</strong></p></li>
</ul>
</dd>
</dl>
<p>:param :
:param defaults to <cite>True</cite>): The key or keys to be filtered in <cite>to_memory</cite> method. If</p>
<blockquote>
<div><p>it’s
- <cite>False</cite>, <cite>None</cite> will be returned in the <cite>to_memory</cite> method
- <cite>str</cite>, the corresponding value will be returned
- <cite>List[str]</cite>, a filtered dictionary will be returned
- <cite>True</cite>, the whole dictionary will be returned</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>`Optional</strong><strong>[</strong><strong>Union</strong><strong>[</strong><strong>str</strong> (<em>keys_to_content</em>) – </p></li>
<li><p><strong>bool</strong></p></li>
<li><p><strong>Sequence</strong><strong>[</strong><strong>str</strong><strong>]</strong><strong>]</strong><strong>]</strong><strong>`</strong></p></li>
</ul>
</dd>
</dl>
<p>:param :
:param defaults to <cite>True</cite>): The key or keys to be filtered in <cite>to_content</cite> method. If</p>
<blockquote>
<div><p>it’s
- <cite>False</cite>, <cite>None</cite> will be returned in the <cite>to_content</cite> method
- <cite>str</cite>, the corresponding value will be returned
- <cite>List[str]</cite>, a filtered dictionary will be returned
- <cite>True</cite>, the whole dictionary will be returned</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>`Optional</strong><strong>[</strong><strong>Union</strong><strong>[</strong><strong>str</strong> (<em>keys_to_metadata</em>) – </p></li>
<li><p><strong>bool</strong></p></li>
<li><p><strong>Sequence</strong><strong>[</strong><strong>str</strong><strong>]</strong><strong>]</strong><strong>`</strong></p></li>
</ul>
</dd>
</dl>
<p>:param :
:param defaults to <cite>False</cite>): The key or keys to be filtered in <cite>to_metadata</cite> method. If</p>
<blockquote>
<div><p>it’s
- <cite>False</cite>, <cite>None</cite> will be returned in the <cite>to_metadata</cite> method
- <cite>str</cite>, the corresponding value will be returned
- <cite>List[str]</cite>, a filtered dictionary will be returned
- <cite>True</cite>, the whole dictionary will be returned</p>
</div></blockquote>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonDictParser.content_hint">
<span class="sig-name descname"><span class="pre">content_hint</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'{your_json_dictionary}'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonDictParser.content_hint" title="Link to this definition"></a></dt>
<dd><p>The hint of the content.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonDictParser.required_keys">
<span class="sig-name descname"><span class="pre">required_keys</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonDictParser.required_keys" title="Link to this definition"></a></dt>
<dd><p>A list of required keys in the JSON dictionary object. If the response
misses any of the required keys, it will raise a
RequiredFieldNotFoundError.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonDictParser.format_instruction">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_instruction</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonDictParser.format_instruction" title="Link to this definition"></a></dt>
<dd><p>Get the format instruction for the json object, if the
format_example is provided, it will be used as the example.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownJsonDictParser.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></span><a class="reference internal" href="_modules/mindpalace/parsers/json_object_parser.html#MarkdownJsonDictParser.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MarkdownJsonDictParser.parse" title="Link to this definition"></a></dt>
<dd><p>Parse the text field of the response to a JSON dictionary object,
store it in the parsed field of the response object, and check if the
required keys exists.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownCodeBlockParser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.parsers.</span></span><span class="sig-name descname"><span class="pre">MarkdownCodeBlockParser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">language_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/parsers/code_block_parser.html#MarkdownCodeBlockParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MarkdownCodeBlockParser" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="mindpalace.parsers.parser_base.html#mindpalace.parsers.parser_base.ParserBase" title="mindpalace.parsers.parser_base.ParserBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParserBase</span></code></a></p>
<p>The base class for parsing the response text by fenced block.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownCodeBlockParser.tag_end">
<span class="sig-name descname"><span class="pre">tag_end</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'```'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownCodeBlockParser.tag_end" title="Link to this definition"></a></dt>
<dd><p>The ending tag.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownCodeBlockParser.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">language_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/parsers/code_block_parser.html#MarkdownCodeBlockParser.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MarkdownCodeBlockParser.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the parser with the language name and the optional
content hint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>language_name</strong> – The name of the language, which will be used
in <a href="#id7"><span class="problematic" id="id8">``</span></a><a href="#id9"><span class="problematic" id="id10">`</span></a>{language_name}</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownCodeBlockParser.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'{language_name}</span> <span class="pre">block'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownCodeBlockParser.name" title="Link to this definition"></a></dt>
<dd><p>The name of the parser.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownCodeBlockParser.tag_begin">
<span class="sig-name descname"><span class="pre">tag_begin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'```{language_name}'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownCodeBlockParser.tag_begin" title="Link to this definition"></a></dt>
<dd><p>The beginning tag.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownCodeBlockParser.content_hint">
<span class="sig-name descname"><span class="pre">content_hint</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'${{your_{language_name}_code}}'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownCodeBlockParser.content_hint" title="Link to this definition"></a></dt>
<dd><p>The hint of the content.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownCodeBlockParser.format_instruction">
<span class="sig-name descname"><span class="pre">format_instruction</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'You</span> <span class="pre">should</span> <span class="pre">generate</span> <span class="pre">{language_name}</span> <span class="pre">code</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">{language_name}</span> <span class="pre">fenced</span> <span class="pre">code</span> <span class="pre">block</span> <span class="pre">as</span> <span class="pre">follows:</span> <span class="pre">\n```{language_name}\n{content_hint}\n```'</span></em><a class="headerlink" href="#mindpalace.parsers.MarkdownCodeBlockParser.format_instruction" title="Link to this definition"></a></dt>
<dd><p>The instruction for the format of the code block.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.MarkdownCodeBlockParser.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></span><a class="reference internal" href="_modules/mindpalace/parsers/code_block_parser.html#MarkdownCodeBlockParser.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MarkdownCodeBlockParser.parse" title="Link to this definition"></a></dt>
<dd><p>Extract the content between the tag_begin and tag_end in the
response and store it in the parsed field of the response object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.parsers.TaggedContent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.parsers.</span></span><span class="sig-name descname"><span class="pre">TaggedContent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag_begin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag_end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parse_json</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/parsers/tagged_content_parser.html#TaggedContent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.TaggedContent" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A tagged content object to store the tag name, tag begin, content hint
and tag end.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.TaggedContent.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag_begin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag_end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parse_json</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/parsers/tagged_content_parser.html#TaggedContent.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.TaggedContent.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the tagged content object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<cite>str</cite>) – The name of the tagged content.</p></li>
<li><p><strong>tag_begin</strong> (<cite>str</cite>) – The beginning tag.</p></li>
<li><p><strong>content_hint</strong> (<cite>str</cite>) – The hint of the content.</p></li>
<li><p><strong>tag_end</strong> (<cite>str</cite>) – The ending tag.</p></li>
<li><p><strong>parse_json</strong> (<cite>bool</cite>, defaults to <cite>False</cite>) – Whether to parse the content as a json object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.TaggedContent.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.parsers.TaggedContent.name" title="Link to this definition"></a></dt>
<dd><p>The name of the tagged content, which will be used as the key in
extracted dictionary.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.TaggedContent.tag_begin">
<span class="sig-name descname"><span class="pre">tag_begin</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.parsers.TaggedContent.tag_begin" title="Link to this definition"></a></dt>
<dd><p>The beginning tag.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.TaggedContent.content_hint">
<span class="sig-name descname"><span class="pre">content_hint</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.parsers.TaggedContent.content_hint" title="Link to this definition"></a></dt>
<dd><p>The hint of the content.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.TaggedContent.tag_end">
<span class="sig-name descname"><span class="pre">tag_end</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.parsers.TaggedContent.tag_end" title="Link to this definition"></a></dt>
<dd><p>The ending tag.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.TaggedContent.parse_json">
<span class="sig-name descname"><span class="pre">parse_json</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#mindpalace.parsers.TaggedContent.parse_json" title="Link to this definition"></a></dt>
<dd><p>Whether to parse the content as a json object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.parsers.MultiTaggedContentParser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.parsers.</span></span><span class="sig-name descname"><span class="pre">MultiTaggedContentParser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">tagged_contents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.parsers.tagged_content_parser.html#mindpalace.parsers.tagged_content_parser.TaggedContent" title="mindpalace.parsers.tagged_content_parser.TaggedContent"><span class="pre">TaggedContent</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_memory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_allow_missing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/parsers/tagged_content_parser.html#MultiTaggedContentParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MultiTaggedContentParser" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="mindpalace.parsers.parser_base.html#mindpalace.parsers.parser_base.ParserBase" title="mindpalace.parsers.parser_base.ParserBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParserBase</span></code></a>, <a class="reference internal" href="mindpalace.parsers.parser_base.html#mindpalace.parsers.parser_base.DictFilterMixin" title="mindpalace.parsers.parser_base.DictFilterMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">DictFilterMixin</span></code></a></p>
<p>Parse response text by multiple tags, and return a dict of their
content. Asking llm to generate JSON dictionary object directly maybe not a
good idea due to involving escape characters and other issues. So we can
ask llm to generate text with tags, and then parse the text to get the
final JSON dictionary object.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MultiTaggedContentParser.json_required_hint">
<span class="sig-name descname"><span class="pre">json_required_hint</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">',</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">content</span> <span class="pre">between</span> <span class="pre">{}</span> <span class="pre">MUST</span> <span class="pre">be</span> <span class="pre">a</span> <span class="pre">JSON</span> <span class="pre">object:'</span></em><a class="headerlink" href="#mindpalace.parsers.MultiTaggedContentParser.json_required_hint" title="Link to this definition"></a></dt>
<dd><p>If a tagged content is required to be a JSON object by <cite>parse_json</cite>
equals to <cite>True</cite>, this instruction will be used to remind the model to
generate JSON object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.MultiTaggedContentParser.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">tagged_contents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.parsers.tagged_content_parser.html#mindpalace.parsers.tagged_content_parser.TaggedContent" title="mindpalace.parsers.tagged_content_parser.TaggedContent"><span class="pre">TaggedContent</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_memory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_allow_missing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/parsers/tagged_content_parser.html#MultiTaggedContentParser.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MultiTaggedContentParser.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the parser with tags.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*tagged_contents</strong> (<cite>dict[str, Tuple[str, str]]</cite>) – Multiple TaggedContent objects, each object contains the tag
name, tag begin, content hint and tag end. The name will be
used as the key in the extracted dictionary.</p></li>
<li><p><strong>required_keys</strong> (<cite>Optional[List[str]]</cite>, defaults to <cite>None</cite>) – A list of required</p></li>
<li><p><strong>(</strong><strong>`Optional</strong><strong>[</strong><strong>Union</strong><strong>[</strong><strong>str</strong> (<em>keys_to_memory</em>) – </p></li>
<li><p><strong>bool</strong></p></li>
<li><p><strong>Sequence</strong><strong>[</strong><strong>str</strong><strong>]</strong><strong>]</strong><strong>]</strong><strong>`</strong></p></li>
</ul>
</dd>
</dl>
<p>:param :
:param defaults to <cite>True</cite>): The key or keys to be filtered in <cite>to_memory</cite> method. If</p>
<blockquote>
<div><p>it’s
- <cite>False</cite>, <cite>None</cite> will be returned in the <cite>to_memory</cite> method
- <cite>str</cite>, the corresponding value will be returned
- <cite>List[str]</cite>, a filtered dictionary will be returned
- <cite>True</cite>, the whole dictionary will be returned</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>`Optional</strong><strong>[</strong><strong>Union</strong><strong>[</strong><strong>str</strong> (<em>keys_to_content</em>) – </p></li>
<li><p><strong>bool</strong></p></li>
<li><p><strong>Sequence</strong><strong>[</strong><strong>str</strong><strong>]</strong><strong>]</strong><strong>`</strong></p></li>
</ul>
</dd>
</dl>
<p>:param :
:param defaults to <cite>True</cite>): The key or keys to be filtered in <cite>to_content</cite> method. If</p>
<blockquote>
<div><p>it’s
- <cite>False</cite>, <cite>None</cite> will be returned in the <cite>to_content</cite> method
- <cite>str</cite>, the corresponding value will be returned
- <cite>List[str]</cite>, a filtered dictionary will be returned
- <cite>True</cite>, the whole dictionary will be returned</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>`Optional</strong><strong>[</strong><strong>Union</strong><strong>[</strong><strong>str</strong> (<em>keys_to_metadata</em>) – </p></li>
<li><p><strong>bool</strong></p></li>
<li><p><strong>Sequence</strong><strong>[</strong><strong>str</strong><strong>]</strong><strong>]</strong><strong>]</strong><strong>`</strong></p></li>
</ul>
</dd>
</dl>
<p>:param :
:param defaults to <cite>False</cite>): The key or keys to be filtered in <cite>to_metadata</cite> method. If</p>
<blockquote>
<div><p>it’s
- <cite>False</cite>, <cite>None</cite> will be returned in the <cite>to_metadata</cite> method
- <cite>str</cite>, the corresponding value will be returned
- <cite>List[str]</cite>, a filtered dictionary will be returned
- <cite>True</cite>, the whole dictionary will be returned</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>keys_allow_missing</strong> (<cite>Optional[List[str]]</cite>, defaults to <cite>None</cite>) – A list of keys that are allowed to be missing in the response.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.parsers.MultiTaggedContentParser.format_instruction">
<span class="sig-name descname"><span class="pre">format_instruction</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Respond</span> <span class="pre">with</span> <span class="pre">specific</span> <span class="pre">tags</span> <span class="pre">as</span> <span class="pre">outlined</span> <span class="pre">below{json_required_hint}\n{tag_lines_format}'</span></em><a class="headerlink" href="#mindpalace.parsers.MultiTaggedContentParser.format_instruction" title="Link to this definition"></a></dt>
<dd><p>The instruction for the format of the tagged content.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.MultiTaggedContentParser.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></span><a class="reference internal" href="_modules/mindpalace/parsers/tagged_content_parser.html#MultiTaggedContentParser.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.MultiTaggedContentParser.parse" title="Link to this definition"></a></dt>
<dd><p>Parse the response text by tags, and return a dict of their content
in the parsed field of the model response object. If the tagged content
requires to parse as a JSON object by <cite>parse_json</cite> equals to <cite>True</cite>, it
will be parsed as a JSON object by <cite>json.loads</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.parsers.RegexTaggedContentParser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.parsers.</span></span><span class="sig-name descname"><span class="pre">RegexTaggedContentParser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tagged_content_pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'&lt;(?P&lt;name&gt;[^&gt;]+)&gt;(?P&lt;content&gt;.*?)&lt;/\\1?&gt;'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format_instruction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">try_parse_json</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_memory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/parsers/regex_tagged_content_parser.html#RegexTaggedContentParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.RegexTaggedContentParser" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="mindpalace.parsers.parser_base.html#mindpalace.parsers.parser_base.ParserBase" title="mindpalace.parsers.parser_base.ParserBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParserBase</span></code></a>, <a class="reference internal" href="mindpalace.parsers.parser_base.html#mindpalace.parsers.parser_base.DictFilterMixin" title="mindpalace.parsers.parser_base.DictFilterMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">DictFilterMixin</span></code></a></p>
<p>A regex tagged content parser, which extracts tagged content according
to the provided regex pattern. Different from other parsers, this parser
allows to extract multiple tagged content without knowing the keys in
advance. The parsed result will be a dictionary within the parsed field of
the model response.</p>
<p>Compared with other parsers, this parser is more flexible and can be used
in dynamic scenarios where
- the keys are not known in advance
- the number of the tagged content is not fixed</p>
<p>Note: Without knowing the keys in advance, it’s hard to prepare a format
instruction template for different scenarios. Therefore, we ask the user
to provide the format instruction in the constructor. Of course, the user
can construct and manage the prompt by themselves optionally.</p>
<p class="rubric">Example</p>
<p>By default, the parser use a regex pattern to extract tagged content
with the following format:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">&lt;{name1}&gt;{content1}&lt;/{name1}&gt;</span>
<span class="pre">&lt;{name2}&gt;{content2}&lt;/{name2}&gt;</span>
<span class="pre">`</span></code>
The parser will extract the content as the following dictionary:
<a href="#id17"><span class="problematic" id="id18">``</span></a>`
{</p>
<blockquote>
<div><p>“name1”: content1,
“name2”: content2,</p>
</div></blockquote>
<section id="id19">
<h2>}<a class="headerlink" href="#id19" title="Link to this heading"></a></h2>
<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.RegexTaggedContentParser.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tagged_content_pattern</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'&lt;(?P&lt;name&gt;[^&gt;]+)&gt;(?P&lt;content&gt;.*?)&lt;/\\1?&gt;'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format_instruction</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">try_parse_json</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_memory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys_to_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/parsers/regex_tagged_content_parser.html#RegexTaggedContentParser.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.RegexTaggedContentParser.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the regex tagged content parser.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>Optional</strong><strong>[</strong><strong>str</strong><strong>]</strong> (<em>tagged_content_pattern</em>)</p></li>
<li><p><strong>to</strong> (<em>defaults</em>)</p></li>
<li><p><strong>`&quot;&lt;</strong> – <p>The regex pattern to extract tagged content. The pattern should
contain two named groups: <cite>name</cite> and <cite>content</cite>. The <cite>name</cite>
group is used as the key of the tagged content, and the
<cite>content</cite> group is used as the value.</p>
</p></li>
<li><p><strong>format_instruction</strong> (<cite>Optional[str]</cite>, defaults to <cite>None</cite>) – The instruction for the format of the tagged content, which
will be attached to the end of the prompt messages to remind
the LLM to follow the format.</p></li>
<li><p><strong>try_parse_json</strong> (<cite>bool</cite>, defaults to <cite>True</cite>) – Whether to try to parse the tagged content as JSON. Note
the parsing function won’t raise exceptions.</p></li>
<li><p><strong>required_keys</strong> (<cite>Optional[List[str]]</cite>, defaults to <cite>None</cite>) – The keys that are required in the tagged content.</p></li>
<li><p><strong>(</strong><strong>`Union</strong><strong>[</strong><strong>str</strong> (<em>keys_to_memory</em>) – </p></li>
<li><p><strong>bool</strong></p></li>
<li><p><strong>Sequence</strong><strong>[</strong><strong>str</strong><strong>]</strong><strong>]</strong><strong>`</strong></p></li>
</ul>
</dd>
</dl>
<p>:param :
:param defaults to <cite>True</cite>): The keys to save to memory.
:param keys_to_content (<cite>Union[str:
:param bool:
:param Sequence[str]]</cite>:
:param :
:param defaults to <cite>True</cite>): The keys to save to content.
:param keys_to_metadata (<cite>Union[str:
:param bool:
:param Sequence[str]]</cite>:
:param :
:param defaults to <cite>False</cite>): The key or keys to be filtered in <cite>to_metadata</cite> method. If</p>
<blockquote>
<div><p>it’s
- <cite>False</cite>, <cite>None</cite> will be returned in the <cite>to_metadata</cite> method
- <cite>str</cite>, the corresponding value will be returned
- <cite>List[str]</cite>, a filtered dictionary will be returned
- <cite>True</cite>, the whole dictionary will be returned</p>
</div></blockquote>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mindpalace.parsers.RegexTaggedContentParser.format_instruction">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_instruction</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.parsers.RegexTaggedContentParser.format_instruction" title="Link to this definition"></a></dt>
<dd><p>The format instruction for the tagged content.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.parsers.RegexTaggedContentParser.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mindpalace.models.response.html#mindpalace.models.response.ModelResponse" title="mindpalace.models.response.ModelResponse"><span class="pre">ModelResponse</span></a></span></span><a class="reference internal" href="_modules/mindpalace/parsers/regex_tagged_content_parser.html#RegexTaggedContentParser.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mindpalace.parsers.RegexTaggedContentParser.parse" title="Link to this definition"></a></dt>
<dd><p>Parse the response text by the regex pattern, and return a dict of
the content in the parsed field of the response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>response</strong> (<cite>ModelResponse</cite>) – The response to be parsed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The response with the parsed field as the parsed
result.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>ModelResponse</cite></p>
</dd>
</dl>
</dd></dl>

</section>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mindpalace.memory.html" class="btn btn-neutral float-left" title="mindpalace.memory" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mindpalace.exception.html" class="btn btn-neutral float-right" title="mindpalace.exception" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Alibaba Tongyi Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>