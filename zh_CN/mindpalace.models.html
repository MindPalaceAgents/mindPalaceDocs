<!-- layout.html -->


<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mindpalace.models &mdash; MindPalace  文档</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=c9484b72" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=7d86a446"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/translations.js?v=beaddf03"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="mindpalace.agents" href="mindpalace.agents.html" />
    <link rel="prev" title="mindpalace.message" href="mindpalace.message.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" > 

          
          
          <a href="index.html" class="icon icon-home">
            MindPalace
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div> <!-- language_selector.html -->
<div class="language-selector">
    <a href="../en/mindpalace.models.html">English</a></li> |
    <a href="../zh_CN/mindpalace.models.html">中文</a></li>
</div> 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">MindPalace 教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial/102-installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/103-example.html">快速开始</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/203-model.html">模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/203-stream.html">流式输出</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/206-prompt.html">提示工程</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/201-agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/205-memory.html">记忆</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/203-parser.html">结果解析</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/209-prompt_opt.html">系统提示优化</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/204-service.html">工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/202-pipeline.html">Pipeline和MsgHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/208-distribute.html">分布式</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/209-gui.html">MindPalace Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/210-rag.html">简要介绍MindPalace中的RAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/211-web.html">预备</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/211-web.html#guidance">Guidance</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/211-web.html#id2">与智能体结合</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/105-logging.html">日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/207-monitor.html">监控</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/104-usecase.html">样例：狼人杀游戏</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/contribute.html">参与贡献</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MindPalace API 文档</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mindpalace.html">mindpalace</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.message.html">mindpalace.message</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">mindpalace.models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.ModelWrapperBase"><code class="docutils literal notranslate"><span class="pre">ModelWrapperBase</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelWrapperBase.model_type"><code class="docutils literal notranslate"><span class="pre">ModelWrapperBase.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelWrapperBase.__init__"><code class="docutils literal notranslate"><span class="pre">ModelWrapperBase.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelWrapperBase.config_name"><code class="docutils literal notranslate"><span class="pre">ModelWrapperBase.config_name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelWrapperBase.model_name"><code class="docutils literal notranslate"><span class="pre">ModelWrapperBase.model_name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelWrapperBase.get_wrapper"><code class="docutils literal notranslate"><span class="pre">ModelWrapperBase.get_wrapper()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelWrapperBase.format"><code class="docutils literal notranslate"><span class="pre">ModelWrapperBase.format()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelWrapperBase.format_for_common_chat_models"><code class="docutils literal notranslate"><span class="pre">ModelWrapperBase.format_for_common_chat_models()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.ModelResponse"><code class="docutils literal notranslate"><span class="pre">ModelResponse</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelResponse.__init__"><code class="docutils literal notranslate"><span class="pre">ModelResponse.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelResponse.text"><code class="docutils literal notranslate"><span class="pre">ModelResponse.text</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelResponse.stream"><code class="docutils literal notranslate"><span class="pre">ModelResponse.stream</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ModelResponse.is_stream_exhausted"><code class="docutils literal notranslate"><span class="pre">ModelResponse.is_stream_exhausted</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.PostAPIModelWrapperBase"><code class="docutils literal notranslate"><span class="pre">PostAPIModelWrapperBase</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.PostAPIModelWrapperBase.model_type"><code class="docutils literal notranslate"><span class="pre">PostAPIModelWrapperBase.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.PostAPIModelWrapperBase.__init__"><code class="docutils literal notranslate"><span class="pre">PostAPIModelWrapperBase.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.PostAPIChatWrapper"><code class="docutils literal notranslate"><span class="pre">PostAPIChatWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.PostAPIChatWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">PostAPIChatWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.PostAPIChatWrapper.format"><code class="docutils literal notranslate"><span class="pre">PostAPIChatWrapper.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.OpenAIWrapperBase"><code class="docutils literal notranslate"><span class="pre">OpenAIWrapperBase</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OpenAIWrapperBase.__init__"><code class="docutils literal notranslate"><span class="pre">OpenAIWrapperBase.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OpenAIWrapperBase.format"><code class="docutils literal notranslate"><span class="pre">OpenAIWrapperBase.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.OpenAIChatWrapper"><code class="docutils literal notranslate"><span class="pre">OpenAIChatWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OpenAIChatWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">OpenAIChatWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OpenAIChatWrapper.deprecated_model_type"><code class="docutils literal notranslate"><span class="pre">OpenAIChatWrapper.deprecated_model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OpenAIChatWrapper.substrings_in_vision_models_names"><code class="docutils literal notranslate"><span class="pre">OpenAIChatWrapper.substrings_in_vision_models_names</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OpenAIChatWrapper.__init__"><code class="docutils literal notranslate"><span class="pre">OpenAIChatWrapper.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OpenAIChatWrapper.static_format"><code class="docutils literal notranslate"><span class="pre">OpenAIChatWrapper.static_format()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OpenAIChatWrapper.format"><code class="docutils literal notranslate"><span class="pre">OpenAIChatWrapper.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.OpenAIDALLEWrapper"><code class="docutils literal notranslate"><span class="pre">OpenAIDALLEWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OpenAIDALLEWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">OpenAIDALLEWrapper.model_type</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.OpenAIEmbeddingWrapper"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddingWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OpenAIEmbeddingWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">OpenAIEmbeddingWrapper.model_type</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.DashScopeChatWrapper"><code class="docutils literal notranslate"><span class="pre">DashScopeChatWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.DashScopeChatWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">DashScopeChatWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.DashScopeChatWrapper.deprecated_model_type"><code class="docutils literal notranslate"><span class="pre">DashScopeChatWrapper.deprecated_model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.DashScopeChatWrapper.__init__"><code class="docutils literal notranslate"><span class="pre">DashScopeChatWrapper.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.DashScopeChatWrapper.format"><code class="docutils literal notranslate"><span class="pre">DashScopeChatWrapper.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.DashScopeImageSynthesisWrapper"><code class="docutils literal notranslate"><span class="pre">DashScopeImageSynthesisWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.DashScopeImageSynthesisWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">DashScopeImageSynthesisWrapper.model_type</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.DashScopeTextEmbeddingWrapper"><code class="docutils literal notranslate"><span class="pre">DashScopeTextEmbeddingWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.DashScopeTextEmbeddingWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">DashScopeTextEmbeddingWrapper.model_type</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.DashScopeMultiModalWrapper"><code class="docutils literal notranslate"><span class="pre">DashScopeMultiModalWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.DashScopeMultiModalWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">DashScopeMultiModalWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.DashScopeMultiModalWrapper.format"><code class="docutils literal notranslate"><span class="pre">DashScopeMultiModalWrapper.format()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.DashScopeMultiModalWrapper.convert_url"><code class="docutils literal notranslate"><span class="pre">DashScopeMultiModalWrapper.convert_url()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.OllamaChatWrapper"><code class="docutils literal notranslate"><span class="pre">OllamaChatWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OllamaChatWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">OllamaChatWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OllamaChatWrapper.__init__"><code class="docutils literal notranslate"><span class="pre">OllamaChatWrapper.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OllamaChatWrapper.format"><code class="docutils literal notranslate"><span class="pre">OllamaChatWrapper.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.OllamaEmbeddingWrapper"><code class="docutils literal notranslate"><span class="pre">OllamaEmbeddingWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OllamaEmbeddingWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">OllamaEmbeddingWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OllamaEmbeddingWrapper.format"><code class="docutils literal notranslate"><span class="pre">OllamaEmbeddingWrapper.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.OllamaGenerationWrapper"><code class="docutils literal notranslate"><span class="pre">OllamaGenerationWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OllamaGenerationWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">OllamaGenerationWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.OllamaGenerationWrapper.format"><code class="docutils literal notranslate"><span class="pre">OllamaGenerationWrapper.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.GeminiChatWrapper"><code class="docutils literal notranslate"><span class="pre">GeminiChatWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.GeminiChatWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">GeminiChatWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.GeminiChatWrapper.generation_method"><code class="docutils literal notranslate"><span class="pre">GeminiChatWrapper.generation_method</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.GeminiChatWrapper.__init__"><code class="docutils literal notranslate"><span class="pre">GeminiChatWrapper.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.GeminiChatWrapper.format"><code class="docutils literal notranslate"><span class="pre">GeminiChatWrapper.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.GeminiEmbeddingWrapper"><code class="docutils literal notranslate"><span class="pre">GeminiEmbeddingWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.GeminiEmbeddingWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">GeminiEmbeddingWrapper.model_type</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.ZhipuAIChatWrapper"><code class="docutils literal notranslate"><span class="pre">ZhipuAIChatWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ZhipuAIChatWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">ZhipuAIChatWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ZhipuAIChatWrapper.__init__"><code class="docutils literal notranslate"><span class="pre">ZhipuAIChatWrapper.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ZhipuAIChatWrapper.format"><code class="docutils literal notranslate"><span class="pre">ZhipuAIChatWrapper.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.ZhipuAIEmbeddingWrapper"><code class="docutils literal notranslate"><span class="pre">ZhipuAIEmbeddingWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.ZhipuAIEmbeddingWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">ZhipuAIEmbeddingWrapper.model_type</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.LiteLLMChatWrapper"><code class="docutils literal notranslate"><span class="pre">LiteLLMChatWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.LiteLLMChatWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">LiteLLMChatWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.LiteLLMChatWrapper.__init__"><code class="docutils literal notranslate"><span class="pre">LiteLLMChatWrapper.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.LiteLLMChatWrapper.format"><code class="docutils literal notranslate"><span class="pre">LiteLLMChatWrapper.format()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mindpalace.models.YiChatWrapper"><code class="docutils literal notranslate"><span class="pre">YiChatWrapper</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.YiChatWrapper.model_type"><code class="docutils literal notranslate"><span class="pre">YiChatWrapper.model_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.YiChatWrapper.__init__"><code class="docutils literal notranslate"><span class="pre">YiChatWrapper.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#mindpalace.models.YiChatWrapper.format"><code class="docutils literal notranslate"><span class="pre">YiChatWrapper.format()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.agents.html">mindpalace.agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.memory.html">mindpalace.memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.parsers.html">mindpalace.parsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.exception.html">mindpalace.exception</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.pipelines.html">mindpalace.pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.service.html">mindpalace.service</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.rpc.html">mindpalace.rpc</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.server.html">mindpalace.server</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.environment.html">mindpalace.environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.web.html">mindpalace.web</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.prompt.html">mindpalace.prompt</a></li>
<li class="toctree-l1"><a class="reference internal" href="mindpalace.utils.html">mindpalace.utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MindPalace</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">mindpalace.models</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/mindpalace.models.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-mindpalace.models">
<span id="mindpalace-models"></span><h1>mindpalace.models<a class="headerlink" href="#module-mindpalace.models" title="Link to this heading"></a></h1>
<p>Import modules in models package.</p>
<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.ModelWrapperBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">ModelWrapperBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/model.html#ModelWrapperBase"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ModelWrapperBase" title="Link to this definition"></a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The base class for model wrapper.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.ModelWrapperBase.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.models.ModelWrapperBase.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.ModelWrapperBase.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/model.html#ModelWrapperBase.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ModelWrapperBase.__init__" title="Link to this definition"></a></dt>
<dd><p>Base class for model wrapper.</p>
<p>All model wrappers should inherit this class and implement the
<cite>__call__</cite> function.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> (<cite>str</cite>) -- The id of the model, which is used to extract configuration
from the config file.</p></li>
<li><p><strong>model_name</strong> (<cite>str</cite>) -- The name of the model.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.ModelWrapperBase.config_name">
<span class="sig-name descname"><span class="pre">config_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.models.ModelWrapperBase.config_name" title="Link to this definition"></a></dt>
<dd><p>The name of the model configuration.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.ModelWrapperBase.model_name">
<span class="sig-name descname"><span class="pre">model_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.models.ModelWrapperBase.model_name" title="Link to this definition"></a></dt>
<dd><p>The name of the model, which is used in model api calling.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.ModelWrapperBase.get_wrapper">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.models.model.html#mindpalace.models.model.ModelWrapperBase" title="mindpalace.models.model.ModelWrapperBase"><span class="pre">ModelWrapperBase</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/model.html#ModelWrapperBase.get_wrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ModelWrapperBase.get_wrapper" title="Link to this definition"></a></dt>
<dd><p>Get the specific model wrapper</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.ModelWrapperBase.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></span><a class="reference internal" href="_modules/mindpalace/models/model.html#ModelWrapperBase.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ModelWrapperBase.format" title="Link to this definition"></a></dt>
<dd><p>Format the input messages into the format that the model
API required.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.ModelWrapperBase.format_for_common_chat_models">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format_for_common_chat_models</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/model.html#ModelWrapperBase.format_for_common_chat_models"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ModelWrapperBase.format_for_common_chat_models" title="Link to this definition"></a></dt>
<dd><p>A common format strategy for chat models, which will format the
input messages into a system message (if provided) and a user message.</p>
<p>Note this strategy maybe not suitable for all scenarios,
and developers are encouraged to implement their own prompt
engineering strategies.</p>
<p>The following is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prompt1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Hi, how can I help you?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;What&#39;s the date today?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">prompt2</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Hi, how can I help you?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;What&#39;s the date today?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The prompt will be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># prompt1</span>
<span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Bob: Hi, how can I help you?</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;user: What&#39;s the date today?&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="c1"># prompt2</span>
<span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Bob: Hi, how can I help you?</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;user: What&#39;s the date today?&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted messages.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.ModelResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">ModelResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_urls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parsed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/response.html#ModelResponse"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ModelResponse" title="Link to this definition"></a></dt>
<dd><p>基类：<code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Encapsulation of data returned by the model.</p>
<p>The main purpose of this class is to align the return formats of different
models and act as a bridge between models and agents.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.ModelResponse.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_urls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parsed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/response.html#ModelResponse.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ModelResponse.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the model response.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<cite>str</cite>, optional) -- The text field.</p></li>
<li><p><strong>embedding</strong> (<cite>Sequence</cite>, optional) -- The embedding returned by the model.</p></li>
<li><p><strong>image_urls</strong> (<cite>Sequence[str]</cite>, optional) -- The image URLs returned by the model.</p></li>
<li><p><strong>raw</strong> (<cite>Any</cite>, optional) -- The raw data returned by the model.</p></li>
<li><p><strong>parsed</strong> (<cite>Any</cite>, optional) -- The parsed data returned by the model.</p></li>
<li><p><strong>stream</strong> (<cite>Generator</cite>, optional) -- The stream data returned by the model.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mindpalace.models.ModelResponse.text">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">text</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#mindpalace.models.ModelResponse.text" title="Link to this definition"></a></dt>
<dd><p>Return the text field. If the stream field is available, the text
field will be updated accordingly.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mindpalace.models.ModelResponse.stream">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">stream</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mindpalace.models.ModelResponse.stream" title="Link to this definition"></a></dt>
<dd><p>Return the stream generator if it exists.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mindpalace.models.ModelResponse.is_stream_exhausted">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_stream_exhausted</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><a class="headerlink" href="#mindpalace.models.ModelResponse.is_stream_exhausted" title="Link to this definition"></a></dt>
<dd><p>Whether the stream has been processed already.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.PostAPIModelWrapperBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">PostAPIModelWrapperBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2048</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">messages_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'messages'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/post_model.html#PostAPIModelWrapperBase"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.PostAPIModelWrapperBase" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.model.html#mindpalace.models.model.ModelWrapperBase" title="mindpalace.models.model.ModelWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelWrapperBase</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>The base model wrapper for the model deployed on the POST API.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.PostAPIModelWrapperBase.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'post_api'</span></em><a class="headerlink" href="#mindpalace.models.PostAPIModelWrapperBase.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.PostAPIModelWrapperBase.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2048</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">messages_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'messages'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/post_model.html#PostAPIModelWrapperBase.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.PostAPIModelWrapperBase.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the model wrapper.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> (<cite>str</cite>) -- The id of the model.</p></li>
<li><p><strong>api_url</strong> (<cite>str</cite>) -- The url of the post request api.</p></li>
<li><p><strong>headers</strong> (<cite>dict</cite>, defaults to <cite>None</cite>) -- The headers of the api. Defaults to None.</p></li>
<li><p><strong>max_length</strong> (<cite>int</cite>, defaults to <cite>2048</cite>) -- The maximum length of the model.</p></li>
<li><p><strong>timeout</strong> (<cite>int</cite>, defaults to <cite>30</cite>) -- The timeout of the api. Defaults to 30.</p></li>
<li><p><strong>json_args</strong> (<cite>dict</cite>, defaults to <cite>None</cite>) -- The json arguments of the api. Defaults to None.</p></li>
<li><p><strong>post_args</strong> (<cite>dict</cite>, defaults to <cite>None</cite>) -- The post arguments of the api. Defaults to None.</p></li>
<li><p><strong>max_retries</strong> (<cite>int</cite>, defaults to <cite>3</cite>) -- The maximum number of retries when the <cite>parse_func</cite> raise an
exception.</p></li>
<li><p><strong>messages_key</strong> (<cite>str</cite>, defaults to <cite>inputs</cite>) -- The key of the input messages in the json argument.</p></li>
<li><p><strong>retry_interval</strong> (<cite>int</cite>, defaults to <cite>1</cite>) -- The interval between retries when a request fails.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>When an object of <cite>PostApiModelWrapper</cite> is called, the arguments
will of post requests will be used as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="n">api_url</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="p">{</span>
        <span class="n">messages_key</span><span class="p">:</span> <span class="n">messages</span><span class="p">,</span>
        <span class="o">**</span><span class="n">json_args</span>
    <span class="p">},</span>
    <span class="o">**</span><span class="n">post_args</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.PostAPIChatWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">PostAPIChatWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2048</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">messages_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'messages'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/post_model.html#PostAPIChatWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.PostAPIChatWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.post_model.html#mindpalace.models.post_model.PostAPIModelWrapperBase" title="mindpalace.models.post_model.PostAPIModelWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">PostAPIModelWrapperBase</span></code></a></p>
<p>A post api model wrapper compatible with openai chat, e.g., vLLM,
FastChat.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.PostAPIChatWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'post_api_chat'</span></em><a class="headerlink" href="#mindpalace.models.PostAPIChatWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.PostAPIChatWrapper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/post_model.html#PostAPIChatWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.PostAPIChatWrapper.format" title="Link to this definition"></a></dt>
<dd><p>Format the input messages into a list of dict according to the model
name. For example, if the model name is prefixed with &quot;gpt-&quot;, the
input messages will be formatted for OpenAI models.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted messages.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>Union[List[dict]]</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIWrapperBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">OpenAIWrapperBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">organization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/openai_model.html#OpenAIWrapperBase"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OpenAIWrapperBase" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.model.html#mindpalace.models.model.ModelWrapperBase" title="mindpalace.models.model.ModelWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelWrapperBase</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>The model wrapper for OpenAI API.</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>From <a class="reference external" href="https://platform.openai.com/docs/api-reference/chat/create">https://platform.openai.com/docs/api-reference/chat/create</a></p></li>
</ul>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;id&quot;: &quot;chatcmpl-123&quot;,
&quot;object&quot;: &quot;chat.completion&quot;,
&quot;created&quot;: 1677652288,
&quot;model&quot;: &quot;gpt-4o-mini&quot;,
&quot;system_fingerprint&quot;: &quot;fp_44709d6fcb&quot;,
&quot;choices&quot;: [</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><p>&quot;index&quot;: 0,
&quot;message&quot;: {</p>
<blockquote>
<div><p>&quot;role&quot;: &quot;assistant&quot;,
&quot;content&quot;: &quot;Hello there, how may I assist you today?&quot;,</p>
</div></blockquote>
<p>},
&quot;logprobs&quot;: null,
&quot;finish_reason&quot;: &quot;stop&quot;</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>],
&quot;usage&quot;: {</p>
<blockquote>
<div><p>&quot;prompt_tokens&quot;: 9,
&quot;completion_tokens&quot;: 12,
&quot;total_tokens&quot;: 21</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIWrapperBase.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">organization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/openai_model.html#OpenAIWrapperBase.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OpenAIWrapperBase.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the openai client.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> (<cite>str</cite>) -- The name of the model config.</p></li>
<li><p><strong>model_name</strong> (<cite>str</cite>, default <cite>None</cite>) -- The name of the model to use in OpenAI API.</p></li>
<li><p><strong>api_key</strong> (<cite>str</cite>, default <cite>None</cite>) -- The API key for OpenAI API. If not specified, it will
be read from the environment variable <cite>OPENAI_API_KEY</cite>.</p></li>
<li><p><strong>organization</strong> (<cite>str</cite>, default <cite>None</cite>) -- The organization ID for OpenAI API. If not specified, it will
be read from the environment variable <cite>OPENAI_ORGANIZATION</cite>.</p></li>
<li><p><strong>client_args</strong> (<cite>dict</cite>, default <cite>None</cite>) -- The extra keyword arguments to initialize the OpenAI client.</p></li>
<li><p><strong>generate_args</strong> (<cite>dict</cite>, default <cite>None</cite>) -- The extra keyword arguments used in openai api generation,
e.g. <cite>temperature</cite>, <cite>seed</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIWrapperBase.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></span><a class="reference internal" href="_modules/mindpalace/models/openai_model.html#OpenAIWrapperBase.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OpenAIWrapperBase.format" title="Link to this definition"></a></dt>
<dd><p>Format the input messages into the format that the model
API required.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIChatWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">OpenAIChatWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">organization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/openai_model.html#OpenAIChatWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OpenAIChatWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.openai_model.html#mindpalace.models.openai_model.OpenAIWrapperBase" title="mindpalace.models.openai_model.OpenAIWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpenAIWrapperBase</span></code></a></p>
<p>The model wrapper for OpenAI's chat API.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIChatWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'openai_chat'</span></em><a class="headerlink" href="#mindpalace.models.OpenAIChatWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIChatWrapper.deprecated_model_type">
<span class="sig-name descname"><span class="pre">deprecated_model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'openai'</span></em><a class="headerlink" href="#mindpalace.models.OpenAIChatWrapper.deprecated_model_type" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIChatWrapper.substrings_in_vision_models_names">
<span class="sig-name descname"><span class="pre">substrings_in_vision_models_names</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['gpt-4-turbo',</span> <span class="pre">'vision',</span> <span class="pre">'gpt-4o']</span></em><a class="headerlink" href="#mindpalace.models.OpenAIChatWrapper.substrings_in_vision_models_names" title="Link to this definition"></a></dt>
<dd><p>The substrings in the model names of vision models.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIChatWrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">organization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/openai_model.html#OpenAIChatWrapper.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OpenAIChatWrapper.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the openai client.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> (<cite>str</cite>) -- The name of the model config.</p></li>
<li><p><strong>model_name</strong> (<cite>str</cite>, default <cite>None</cite>) -- The name of the model to use in OpenAI API.</p></li>
<li><p><strong>api_key</strong> (<cite>str</cite>, default <cite>None</cite>) -- The API key for OpenAI API. If not specified, it will
be read from the environment variable <cite>OPENAI_API_KEY</cite>.</p></li>
<li><p><strong>organization</strong> (<cite>str</cite>, default <cite>None</cite>) -- The organization ID for OpenAI API. If not specified, it will
be read from the environment variable <cite>OPENAI_ORGANIZATION</cite>.</p></li>
<li><p><strong>client_args</strong> (<cite>dict</cite>, default <cite>None</cite>) -- The extra keyword arguments to initialize the OpenAI client.</p></li>
<li><p><strong>stream</strong> (<cite>bool</cite>, default <cite>False</cite>) -- Whether to enable stream mode.</p></li>
<li><p><strong>generate_args</strong> (<cite>dict</cite>, default <cite>None</cite>) -- The extra keyword arguments used in openai api generation,
e.g. <cite>temperature</cite>, <cite>seed</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIChatWrapper.static_format">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">static_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/openai_model.html#OpenAIChatWrapper.static_format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OpenAIChatWrapper.static_format" title="Link to this definition"></a></dt>
<dd><p>A static version of the format method, which can be used without
initializing the OpenAIChatWrapper object.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p></li>
<li><p><strong>model_name</strong> (<cite>str</cite>) -- The name of the model to use in OpenAI API.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted messages in the format that OpenAI Chat API
required.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIChatWrapper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/openai_model.html#OpenAIChatWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OpenAIChatWrapper.format" title="Link to this definition"></a></dt>
<dd><p>Format the input string and dictionary into the format that
OpenAI Chat API required. If you're using a OpenAI-compatible model
without a prefix &quot;gpt-&quot; in its name, the format method will
automatically format the input messages into the required format.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted messages in the format that OpenAI Chat API
required.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIDALLEWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">OpenAIDALLEWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">organization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/openai_model.html#OpenAIDALLEWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OpenAIDALLEWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.openai_model.html#mindpalace.models.openai_model.OpenAIWrapperBase" title="mindpalace.models.openai_model.OpenAIWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpenAIWrapperBase</span></code></a></p>
<p>The model wrapper for OpenAI's DALL·E API.</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>Refer to <a class="reference external" href="https://platform.openai.com/docs/api-reference/images/create">https://platform.openai.com/docs/api-reference/images/create</a></p></li>
</ul>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;created&quot;: 1589478378,
&quot;data&quot;: [</p>
<blockquote>
<div><dl class="simple">
<dt>{</dt><dd><p>&quot;url&quot;: &quot;<a class="reference external" href="https://">https://</a>...&quot;</p>
</dd>
</dl>
<p>},
{</p>
<blockquote>
<div><p>&quot;url&quot;: &quot;<a class="reference external" href="https://">https://</a>...&quot;</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIDALLEWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'openai_dall_e'</span></em><a class="headerlink" href="#mindpalace.models.OpenAIDALLEWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIEmbeddingWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">OpenAIEmbeddingWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">organization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/openai_model.html#OpenAIEmbeddingWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OpenAIEmbeddingWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.openai_model.html#mindpalace.models.openai_model.OpenAIWrapperBase" title="mindpalace.models.openai_model.OpenAIWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpenAIWrapperBase</span></code></a></p>
<p>The model wrapper for OpenAI embedding API.</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>Refer to</p></li>
</ul>
<p><a class="reference external" href="https://platform.openai.com/docs/api-reference/embeddings/create">https://platform.openai.com/docs/api-reference/embeddings/create</a></p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;object&quot;: &quot;list&quot;,
&quot;data&quot;: [</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><p>&quot;object&quot;: &quot;embedding&quot;,
&quot;embedding&quot;: [</p>
<blockquote>
<div><p>0.0023064255,
-0.009327292,
.... (1536 floats total for ada-002)
-0.0028842222,</p>
</div></blockquote>
<p>],
&quot;index&quot;: 0</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>],
&quot;model&quot;: &quot;text-embedding-ada-002&quot;,
&quot;usage&quot;: {</p>
<blockquote>
<div><p>&quot;prompt_tokens&quot;: 8,
&quot;total_tokens&quot;: 8</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.OpenAIEmbeddingWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'openai_embedding'</span></em><a class="headerlink" href="#mindpalace.models.OpenAIEmbeddingWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeChatWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">DashScopeChatWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/dashscope_model.html#DashScopeChatWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.DashScopeChatWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.dashscope_model.html#mindpalace.models.dashscope_model.DashScopeWrapperBase" title="mindpalace.models.dashscope_model.DashScopeWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DashScopeWrapperBase</span></code></a></p>
<p>The model wrapper for DashScope's chat API, refer to
<a class="reference external" href="https://help.aliyun.com/zh/dashscope/developer-reference/api-details">https://help.aliyun.com/zh/dashscope/developer-reference/api-details</a></p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>Refer to</p></li>
</ul>
<p><a class="reference external" href="https://help.aliyun.com/zh/dashscope/developer-reference/quick-start?spm=a2c4g.11186623.0.0.7e346eb5RvirBw">https://help.aliyun.com/zh/dashscope/developer-reference/quick-start?spm=a2c4g.11186623.0.0.7e346eb5RvirBw</a></p>
<p><a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;status_code&quot;: 200,
&quot;request_id&quot;: &quot;a75a1b22-e512-957d-891b-37db858ae738&quot;,
&quot;code&quot;: &quot;&quot;,
&quot;message&quot;: &quot;&quot;,
&quot;output&quot;: {</p>
<blockquote>
<div><p>&quot;text&quot;: null,
&quot;finish_reason&quot;: null,
&quot;choices&quot;: [</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><p>&quot;finish_reason&quot;: &quot;stop&quot;,
&quot;message&quot;: {</p>
<blockquote>
<div><p>&quot;role&quot;: &quot;assistant&quot;,
&quot;content&quot;: &quot;xxx&quot;</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
&quot;usage&quot;: {</p>
<blockquote>
<div><p>&quot;input_tokens&quot;: 25,
&quot;output_tokens&quot;: 77,
&quot;total_tokens&quot;: 102</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeChatWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'dashscope_chat'</span></em><a class="headerlink" href="#mindpalace.models.DashScopeChatWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeChatWrapper.deprecated_model_type">
<span class="sig-name descname"><span class="pre">deprecated_model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'tongyi_chat'</span></em><a class="headerlink" href="#mindpalace.models.DashScopeChatWrapper.deprecated_model_type" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeChatWrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/dashscope_model.html#DashScopeChatWrapper.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.DashScopeChatWrapper.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the DashScope wrapper.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> (<cite>str</cite>) -- The name of the model config.</p></li>
<li><p><strong>model_name</strong> (<cite>str</cite>, default <cite>None</cite>) -- The name of the model to use in DashScope API.</p></li>
<li><p><strong>api_key</strong> (<cite>str</cite>, default <cite>None</cite>) -- The API key for DashScope API.</p></li>
<li><p><strong>stream</strong> (<cite>bool</cite>, default <cite>False</cite>) -- If True, the response will be a generator in the <cite>stream</cite>
field of the returned <cite>ModelResponse</cite> object.</p></li>
<li><p><strong>generate_args</strong> (<cite>dict</cite>, default <cite>None</cite>) -- The extra keyword arguments used in DashScope api generation,
e.g. <cite>temperature</cite>, <cite>seed</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeChatWrapper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/dashscope_model.html#DashScopeChatWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.DashScopeChatWrapper.format" title="Link to this definition"></a></dt>
<dd><p>A common format strategy for chat models, which will format the
input messages into a user message.</p>
<p>Note this strategy maybe not suitable for all scenarios,
and developers are encouraged to implement their own prompt
engineering strategies.</p>
<p>The following is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prompt1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Hi, how can I help you?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;What&#39;s the date today?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">prompt2</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Hi, how can I help you?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;What&#39;s the date today?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The prompt will be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># prompt1</span>
<span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Bob: Hi, how can I help you?</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;user: What&#39;s the date today?&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="c1"># prompt2</span>
<span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Bob: Hi, how can I help you?</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;user: What&#39;s the date today?&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted messages.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeImageSynthesisWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">DashScopeImageSynthesisWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/dashscope_model.html#DashScopeImageSynthesisWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.DashScopeImageSynthesisWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.dashscope_model.html#mindpalace.models.dashscope_model.DashScopeWrapperBase" title="mindpalace.models.dashscope_model.DashScopeWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DashScopeWrapperBase</span></code></a></p>
<p>The model wrapper for DashScope Image Synthesis API, refer to
<a class="reference external" href="https://help.aliyun.com/zh/dashscope/developer-reference/quick-start-1">https://help.aliyun.com/zh/dashscope/developer-reference/quick-start-1</a></p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>Refer to</p></li>
</ul>
<p><a class="reference external" href="https://help.aliyun.com/zh/dashscope/developer-reference/api-details-9?spm=a2c4g.11186623.0.0.7108fa70Op6eqF">https://help.aliyun.com/zh/dashscope/developer-reference/api-details-9?spm=a2c4g.11186623.0.0.7108fa70Op6eqF</a></p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;status_code&quot;: 200,
&quot;request_id&quot;: &quot;b54ffeb8-6212-9dac-808c-b3771cba3788&quot;,
&quot;code&quot;: null,
&quot;message&quot;: &quot;&quot;,
&quot;output&quot;: {</p>
<blockquote>
<div><p>&quot;task_id&quot;: &quot;996523eb-034d-459b-ac88-b340b95007a4&quot;,
&quot;task_status&quot;: &quot;SUCCEEDED&quot;,
&quot;results&quot;: [</p>
<blockquote>
<div><dl class="simple">
<dt>{</dt><dd><p>&quot;url&quot;: &quot;RESULT_URL1&quot;</p>
</dd>
</dl>
<p>},
{</p>
<blockquote>
<div><p>&quot;url&quot;: &quot;RESULT_URL2&quot;</p>
</div></blockquote>
<p>},</p>
</div></blockquote>
<p>],
&quot;task_metrics&quot;: {</p>
<blockquote>
<div><p>&quot;TOTAL&quot;: 2,
&quot;SUCCEEDED&quot;: 2,
&quot;FAILED&quot;: 0</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>},
&quot;usage&quot;: {</p>
<blockquote>
<div><p>&quot;image_count&quot;: 2</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeImageSynthesisWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'dashscope_image_synthesis'</span></em><a class="headerlink" href="#mindpalace.models.DashScopeImageSynthesisWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeTextEmbeddingWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">DashScopeTextEmbeddingWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/dashscope_model.html#DashScopeTextEmbeddingWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.DashScopeTextEmbeddingWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.dashscope_model.html#mindpalace.models.dashscope_model.DashScopeWrapperBase" title="mindpalace.models.dashscope_model.DashScopeWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DashScopeWrapperBase</span></code></a></p>
<p>The model wrapper for DashScope Text Embedding API.</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>Refer to</p></li>
</ul>
<p><a class="reference external" href="https://help.aliyun.com/zh/dashscope/developer-reference/text-embedding-api-details?spm=a2c4g.11186623.0.i3">https://help.aliyun.com/zh/dashscope/developer-reference/text-embedding-api-details?spm=a2c4g.11186623.0.i3</a></p>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;status_code&quot;: 200, // 200 indicate success otherwise failed.
&quot;request_id&quot;: &quot;fd564688-43f7-9595-b986&quot;, // The request id.
&quot;code&quot;: &quot;&quot;, // If failed, the error code.
&quot;message&quot;: &quot;&quot;, // If failed, the error message.
&quot;output&quot;: {</p>
<blockquote>
<div><dl>
<dt>&quot;embeddings&quot;: [ // embeddings</dt><dd><dl>
<dt>{</dt><dd><dl class="simple">
<dt>&quot;embedding&quot;: [ // one embedding output</dt><dd><p>-3.8450357913970947, ...,</p>
</dd>
</dl>
<p>],
&quot;text_index&quot;: 0 // the input index.</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>]</p>
</div></blockquote>
<p>},
&quot;usage&quot;: {</p>
<blockquote>
<div><p>&quot;total_tokens&quot;: 3 // the request tokens.</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeTextEmbeddingWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'dashscope_text_embedding'</span></em><a class="headerlink" href="#mindpalace.models.DashScopeTextEmbeddingWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeMultiModalWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">DashScopeMultiModalWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/dashscope_model.html#DashScopeMultiModalWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.DashScopeMultiModalWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.dashscope_model.html#mindpalace.models.dashscope_model.DashScopeWrapperBase" title="mindpalace.models.dashscope_model.DashScopeWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">DashScopeWrapperBase</span></code></a></p>
<p>The model wrapper for DashScope Multimodal API, refer to
<a class="reference external" href="https://help.aliyun.com/zh/dashscope/developer-reference/tongyi-qianwen-vl-api">https://help.aliyun.com/zh/dashscope/developer-reference/tongyi-qianwen-vl-api</a></p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>Refer to</p></li>
</ul>
<p><a class="reference external" href="https://help.aliyun.com/zh/dashscope/developer-reference/tongyi-qianwen-vl-plus-api?spm=a2c4g.11186623.0.0.7fde1f5atQSalN">https://help.aliyun.com/zh/dashscope/developer-reference/tongyi-qianwen-vl-plus-api?spm=a2c4g.11186623.0.0.7fde1f5atQSalN</a></p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;status_code&quot;: 200,
&quot;request_id&quot;: &quot;a0dc436c-2ee7-93e0-9667-c462009dec4d&quot;,
&quot;code&quot;: &quot;&quot;,
&quot;message&quot;: &quot;&quot;,
&quot;output&quot;: {</p>
<blockquote>
<div><p>&quot;text&quot;: null,
&quot;finish_reason&quot;: null,
&quot;choices&quot;: [</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><p>&quot;finish_reason&quot;: &quot;stop&quot;,
&quot;message&quot;: {</p>
<blockquote>
<div><p>&quot;role&quot;: &quot;assistant&quot;,
&quot;content&quot;: [</p>
<blockquote>
<div><dl class="simple">
<dt>{</dt><dd><p>&quot;text&quot;: &quot;这张图片显...&quot;</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
&quot;usage&quot;: {</p>
<blockquote>
<div><p>&quot;input_tokens&quot;: 1277,
&quot;output_tokens&quot;: 81,
&quot;image_tokens&quot;: 1247</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeMultiModalWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'dashscope_multimodal'</span></em><a class="headerlink" href="#mindpalace.models.DashScopeMultiModalWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeMultiModalWrapper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span></span></span><a class="reference internal" href="_modules/mindpalace/models/dashscope_model.html#DashScopeMultiModalWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.DashScopeMultiModalWrapper.format" title="Link to this definition"></a></dt>
<dd><p>Format the messages for DashScope Multimodal API.</p>
<p>The multimodal API has the following requirements:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>The roles of messages must alternate between &quot;user&quot; and</dt><dd><p>&quot;assistant&quot;.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>The message with the role &quot;system&quot; should be the first message</dt><dd><p>in the list.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>If the system message exists, then the second message must</dt><dd><p>have the role &quot;user&quot;.</p>
</dd>
</dl>
</li>
<li><p>The last message in the list should have the role &quot;user&quot;.</p></li>
<li><p>In each message, more than one figure is allowed.</p></li>
</ul>
</div></blockquote>
<p>With the above requirements, we format the messages as follows:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>If the first message is a system message, then we will keep it as</dt><dd><p>system prompt.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>We merge all messages into a conversation history prompt in a</dt><dd><p>single message with the role &quot;user&quot;.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>When there are multiple figures in the given messages, we will</dt><dd><p>attach it to the user message by order. Note if there are
multiple figures, this strategy may cause misunderstanding for
the model. For advanced solutions, developers are encouraged to
implement their own prompt engineering strategies.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>The following is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span>
        <span class="s2">&quot;system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span><span class="p">,</span>
        <span class="n">role</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s2">&quot;figure1&quot;</span>
    <span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span>
        <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
        <span class="s2">&quot;How about this picture?&quot;</span><span class="p">,</span>
        <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s2">&quot;figure2&quot;</span>
    <span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span>
        <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;It&#39;s wonderful! How about mine?&quot;</span><span class="p">,</span>
        <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s2">&quot;figure3&quot;</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The prompt will be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful assistant&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;figure1&quot;</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;figure2&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;figure3&quot;</span><span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="p">(</span>
                    <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;Bob: How about this picture?</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;user: It&#39;s wonderful! How about mine?&quot;</span>
                <span class="p">)</span>
            <span class="p">},</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>In multimodal API, the url of local files should be prefixed with
&quot;<a class="reference external" href="file://">file://</a>&quot;, which will be attached in this format function.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted messages.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.DashScopeMultiModalWrapper.convert_url">
<span class="sig-name descname"><span class="pre">convert_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/dashscope_model.html#DashScopeMultiModalWrapper.convert_url"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.DashScopeMultiModalWrapper.convert_url" title="Link to this definition"></a></dt>
<dd><p>Convert the url to the format of DashScope API. Note for local
files, a prefix &quot;<a class="reference external" href="file://">file://</a>&quot; will be added.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>url</strong> (<cite>Union[str, Sequence[str], None]</cite>) -- A string of url of a list of urls to be converted.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of dictionaries with key as the type of the url
and value as the url. Only &quot;image&quot; and &quot;audio&quot; are supported.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.OllamaChatWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">OllamaChatWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_alive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'5m'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/ollama_model.html#OllamaChatWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OllamaChatWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.ollama_model.html#mindpalace.models.ollama_model.OllamaWrapperBase" title="mindpalace.models.ollama_model.OllamaWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">OllamaWrapperBase</span></code></a></p>
<p>The model wrapper for Ollama chat API.</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>Refer to</p></li>
</ul>
<p><a class="reference external" href="https://github.com/ollama/ollama/blob/main/docs/api.md#generate-a-chat-completion">https://github.com/ollama/ollama/blob/main/docs/api.md#generate-a-chat-completion</a></p>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;model&quot;: &quot;registry.ollama.ai/library/llama3:latest&quot;,
&quot;created_at&quot;: &quot;2023-12-12T14:13:43.416799Z&quot;,
&quot;message&quot;: {</p>
<blockquote>
<div><p>&quot;role&quot;: &quot;assistant&quot;,
&quot;content&quot;: &quot;Hello! How are you today?&quot;</p>
</div></blockquote>
<p>},
&quot;done&quot;: true,
&quot;total_duration&quot;: 5191566416,
&quot;load_duration&quot;: 2154458,
&quot;prompt_eval_count&quot;: 26,
&quot;prompt_eval_duration&quot;: 383809000,
&quot;eval_count&quot;: 298,
&quot;eval_duration&quot;: 4799921000</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.OllamaChatWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ollama_chat'</span></em><a class="headerlink" href="#mindpalace.models.OllamaChatWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.OllamaChatWrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_alive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'5m'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/ollama_model.html#OllamaChatWrapper.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OllamaChatWrapper.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the model wrapper for Ollama API.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<cite>str</cite>) -- The model name used in ollama API.</p></li>
<li><p><strong>stream</strong> (<cite>bool</cite>, default <cite>False</cite>) -- Whether to enable stream mode.</p></li>
<li><p><strong>options</strong> (<cite>dict</cite>, default <cite>None</cite>) -- The extra keyword arguments used in Ollama api generation,
e.g. <cite>{&quot;temperature&quot;: 0., &quot;seed&quot;: 123}</cite>.</p></li>
<li><p><strong>keep_alive</strong> (<cite>str</cite>, default <cite>5m</cite>) -- Controls how long the model will stay loaded into memory
following the request.</p></li>
<li><p><strong>host</strong> (<cite>str</cite>, default <cite>None</cite>) -- The host port of the ollama server.
Defaults to <cite>None</cite>, which is 127.0.0.1:11434.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.OllamaChatWrapper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/ollama_model.html#OllamaChatWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OllamaChatWrapper.format" title="Link to this definition"></a></dt>
<dd><p>Format the messages for ollama Chat API.</p>
<p>All messages will be formatted into a single system message with
system prompt and conversation history.</p>
<p>Note:
1. This strategy maybe not suitable for all scenarios,
and developers are encouraged to implement their own prompt
engineering strategies.
2. For ollama chat api, the content field shouldn't be empty string.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Hi, how can I help you?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;What&#39;s the date today?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The prompt will be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Bob: Hi, how can I help you?</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;user: What&#39;s the date today?&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted messages.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.OllamaEmbeddingWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">OllamaEmbeddingWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_alive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'5m'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/ollama_model.html#OllamaEmbeddingWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OllamaEmbeddingWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.ollama_model.html#mindpalace.models.ollama_model.OllamaWrapperBase" title="mindpalace.models.ollama_model.OllamaWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">OllamaWrapperBase</span></code></a></p>
<p>The model wrapper for Ollama embedding API.</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>Refer to</p></li>
</ul>
<p><a class="reference external" href="https://github.com/ollama/ollama/blob/main/docs/api.md#generate-embeddings">https://github.com/ollama/ollama/blob/main/docs/api.md#generate-embeddings</a></p>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;model&quot;: &quot;all-minilm&quot;,
&quot;embeddings&quot;: [[</p>
<blockquote>
<div><p>0.010071029, -0.0017594862, 0.05007221, 0.04692972,
0.008599704, 0.105441414, -0.025878139, 0.12958129,</p>
</div></blockquote>
<p>]]</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.OllamaEmbeddingWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ollama_embedding'</span></em><a class="headerlink" href="#mindpalace.models.OllamaEmbeddingWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.OllamaEmbeddingWrapper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></span><a class="reference internal" href="_modules/mindpalace/models/ollama_model.html#OllamaEmbeddingWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OllamaEmbeddingWrapper.format" title="Link to this definition"></a></dt>
<dd><p>Format the input messages into the format that the model
API required.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.OllamaGenerationWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">OllamaGenerationWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_alive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'5m'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/ollama_model.html#OllamaGenerationWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OllamaGenerationWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.ollama_model.html#mindpalace.models.ollama_model.OllamaWrapperBase" title="mindpalace.models.ollama_model.OllamaWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">OllamaWrapperBase</span></code></a></p>
<p>The model wrapper for Ollama generation API.</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>From</p></li>
</ul>
<p><a class="reference external" href="https://github.com/ollama/ollama/blob/main/docs/api.md#generate-a-completion">https://github.com/ollama/ollama/blob/main/docs/api.md#generate-a-completion</a></p>
<p><a href="#id37"><span class="problematic" id="id38">``</span></a><a href="#id39"><span class="problematic" id="id40">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;model&quot;: &quot;llama3&quot;,
&quot;created_at&quot;: &quot;2023-08-04T19:22:45.499127Z&quot;,
&quot;response&quot;: &quot;The sky is blue because it is the color of the sky.&quot;,
&quot;done&quot;: true,
&quot;context&quot;: [1, 2, 3],
&quot;total_duration&quot;: 5043500667,
&quot;load_duration&quot;: 5025959,
&quot;prompt_eval_count&quot;: 26,
&quot;prompt_eval_duration&quot;: 325953000,
&quot;eval_count&quot;: 290,
&quot;eval_duration&quot;: 4709213000</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.OllamaGenerationWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ollama_generate'</span></em><a class="headerlink" href="#mindpalace.models.OllamaGenerationWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.OllamaGenerationWrapper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/mindpalace/models/ollama_model.html#OllamaGenerationWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.OllamaGenerationWrapper.format" title="Link to this definition"></a></dt>
<dd><p>Forward the input to the model.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted string prompt.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>str</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.GeminiChatWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">GeminiChatWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/gemini_model.html#GeminiChatWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.GeminiChatWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.gemini_model.html#mindpalace.models.gemini_model.GeminiWrapperBase" title="mindpalace.models.gemini_model.GeminiWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeminiWrapperBase</span></code></a></p>
<p>The wrapper for Google Gemini chat model, e.g. gemini-pro</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.GeminiChatWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gemini_chat'</span></em><a class="headerlink" href="#mindpalace.models.GeminiChatWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model, which is used in model configuration.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.GeminiChatWrapper.generation_method">
<span class="sig-name descname"><span class="pre">generation_method</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'generateContent'</span></em><a class="headerlink" href="#mindpalace.models.GeminiChatWrapper.generation_method" title="Link to this definition"></a></dt>
<dd><p>The generation method used in <cite>__call__</cite> function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.GeminiChatWrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/gemini_model.html#GeminiChatWrapper.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.GeminiChatWrapper.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the wrapper for Google Gemini model.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<cite>str</cite>) -- The name of the model.</p></li>
<li><p><strong>api_key</strong> (<cite>str</cite>, defaults to <cite>None</cite>) -- The api_key for the model. If it is not provided, it will be
loaded from environment variable.</p></li>
<li><p><strong>stream</strong> (<cite>bool</cite>, defaults to <cite>False</cite>) -- Whether to use stream mode.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.GeminiChatWrapper.format">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/gemini_model.html#GeminiChatWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.GeminiChatWrapper.format" title="Link to this definition"></a></dt>
<dd><p>This function provide a basic prompting strategy for Gemini Chat
API in multi-party conversation, which combines all input into a
single string, and wrap it into a user message.</p>
<p>We make the above decision based on the following constraints of the
Gemini generate API:</p>
<p>1. In Gemini <cite>generate_content</cite> API, the <cite>role</cite> field must be either
<cite>user</cite> or <cite>model</cite>.</p>
<p>2. If we pass a list of messages to the <cite>generate_content</cite> API,
the <cite>user</cite> role must speak in the beginning and end of the
messages, and <cite>user</cite> and <cite>model</cite> must alternative. This prevents
us to build a multi-party conversations, where <cite>model</cite> may keep
speaking in different names.</p>
<p>The above information is updated to 2024/03/21. More information
about the Gemini <cite>generate_content</cite> API can be found in
<a class="reference external" href="https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini">https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini</a></p>
<p>Based on the above considerations, we decide to combine all messages
into a single user message. This is a simple and straightforward
strategy, if you have any better ideas, pull request and
discussion are welcome in our GitHub repository
<a class="reference external" href="https://github.com/mindpalace/mindpalace">https://github.com/mindpalace/mindpalace</a>!</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A list with one user message.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.GeminiEmbeddingWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">GeminiEmbeddingWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/gemini_model.html#GeminiEmbeddingWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.GeminiEmbeddingWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.gemini_model.html#mindpalace.models.gemini_model.GeminiWrapperBase" title="mindpalace.models.gemini_model.GeminiWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeminiWrapperBase</span></code></a></p>
<p>The wrapper for Google Gemini embedding model,
e.g. models/embedding-001</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>Refer to <a class="reference external" href="https://ai.google.dev/api/embeddings?hl=zh-cn#response-body">https://ai.google.dev/api/embeddings?hl=zh-cn#response-body</a></p></li>
</ul>
<p><a href="#id41"><span class="problematic" id="id42">``</span></a><a href="#id43"><span class="problematic" id="id44">`</span></a>json
{</p>
<blockquote>
<div><dl>
<dt>&quot;embeddings&quot;: [</dt><dd><dl class="simple">
<dt>{</dt><dd><p>object (ContentEmbedding)</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>]</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.GeminiEmbeddingWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'gemini_embedding'</span></em><a class="headerlink" href="#mindpalace.models.GeminiEmbeddingWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model, which is used in model configuration.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.ZhipuAIChatWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">ZhipuAIChatWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/zhipu_model.html#ZhipuAIChatWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ZhipuAIChatWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.zhipu_model.html#mindpalace.models.zhipu_model.ZhipuAIWrapperBase" title="mindpalace.models.zhipu_model.ZhipuAIWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZhipuAIWrapperBase</span></code></a></p>
<p>The model wrapper for ZhipuAI's chat API.</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>From <a class="reference external" href="https://maas.aminer.cn/dev/api#glm-4">https://maas.aminer.cn/dev/api#glm-4</a></p></li>
</ul>
<p><a href="#id45"><span class="problematic" id="id46">``</span></a><a href="#id47"><span class="problematic" id="id48">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;created&quot;: 1703487403,
&quot;id&quot;: &quot;8239375684858666781&quot;,
&quot;model&quot;: &quot;glm-4&quot;,
&quot;request_id&quot;: &quot;8239375684858666781&quot;,
&quot;choices&quot;: [</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><p>&quot;finish_reason&quot;: &quot;stop&quot;,
&quot;index&quot;: 0,
&quot;message&quot;: {</p>
<blockquote>
<div><p>&quot;content&quot;: &quot;Drawing blueprints with ...&quot;,
&quot;role&quot;: &quot;assistant&quot;</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>],
&quot;usage&quot;: {</p>
<blockquote>
<div><p>&quot;completion_tokens&quot;: 217,
&quot;prompt_tokens&quot;: 31,
&quot;total_tokens&quot;: 248</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.ZhipuAIChatWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'zhipuai_chat'</span></em><a class="headerlink" href="#mindpalace.models.ZhipuAIChatWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.ZhipuAIChatWrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/zhipu_model.html#ZhipuAIChatWrapper.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ZhipuAIChatWrapper.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the zhipuai client.
To init the ZhipuAi client, the api_key is required.
Other client args include base_url and timeout.
The base_url is set to <a class="reference external" href="https://open.bigmodel.cn/api/paas/v4">https://open.bigmodel.cn/api/paas/v4</a>
if not specified. The timeout arg is set for http request timeout.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> (<cite>str</cite>) -- The name of the model config.</p></li>
<li><p><strong>model_name</strong> (<cite>str</cite>, default <cite>None</cite>) -- The name of the model to use in ZhipuAI API.</p></li>
<li><p><strong>api_key</strong> (<cite>str</cite>, default <cite>None</cite>) -- The API key for ZhipuAI API. If not specified, it will
be read from the environment variable.</p></li>
<li><p><strong>stream</strong> (<cite>bool</cite>, default <cite>False</cite>) -- Whether to enable stream mode.</p></li>
<li><p><strong>generate_args</strong> (<cite>dict</cite>, default <cite>None</cite>) -- The extra keyword arguments used in zhipuai api generation,
e.g. <cite>temperature</cite>, <cite>seed</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.ZhipuAIChatWrapper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/zhipu_model.html#ZhipuAIChatWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ZhipuAIChatWrapper.format" title="Link to this definition"></a></dt>
<dd><p>A common format strategy for chat models, which will format the
input messages into a user message.</p>
<p>Note this strategy maybe not suitable for all scenarios,
and developers are encouraged to implement their own prompt
engineering strategies.</p>
<p>The following is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prompt1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Hi, how can I help you?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;What&#39;s the date today?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">prompt2</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Hi, how can I help you?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;What&#39;s the date today?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The prompt will be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># prompt1</span>
<span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Bob: Hi, how can I help you?</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;user: What&#39;s the date today?&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="c1"># prompt2</span>
<span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Bob: Hi, how can I help you?</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;user: What&#39;s the date today?&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted messages.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.ZhipuAIEmbeddingWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">ZhipuAIEmbeddingWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/zhipu_model.html#ZhipuAIEmbeddingWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.ZhipuAIEmbeddingWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.zhipu_model.html#mindpalace.models.zhipu_model.ZhipuAIWrapperBase" title="mindpalace.models.zhipu_model.ZhipuAIWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZhipuAIWrapperBase</span></code></a></p>
<p>The model wrapper for ZhipuAI embedding API.</p>
<p>Example Response:</p>
<p><a href="#id49"><span class="problematic" id="id50">``</span></a><a href="#id51"><span class="problematic" id="id52">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;model&quot;: &quot;embedding-2&quot;,
&quot;data&quot;: [</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><dl class="simple">
<dt>&quot;embedding&quot;: [ (a total of 1024 elements)</dt><dd><p>-0.02675454691052437,
0.019060475751757622,
......
-0.005519774276763201,
0.014949671924114227</p>
</dd>
</dl>
<p>],
&quot;index&quot;: 0,
&quot;object&quot;: &quot;embedding&quot;</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>],
&quot;object&quot;: &quot;list&quot;,
&quot;usage&quot;: {</p>
<blockquote>
<div><p>&quot;completion_tokens&quot;: 0,
&quot;prompt_tokens&quot;: 4,
&quot;total_tokens&quot;: 4</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<section id="id53">
<h2>}<a class="headerlink" href="#id53" title="Link to this heading"></a></h2>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.ZhipuAIEmbeddingWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'zhipuai_embedding'</span></em><a class="headerlink" href="#mindpalace.models.ZhipuAIEmbeddingWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.LiteLLMChatWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">LiteLLMChatWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/litellm_model.html#LiteLLMChatWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.LiteLLMChatWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.litellm_model.html#mindpalace.models.litellm_model.LiteLLMWrapperBase" title="mindpalace.models.litellm_model.LiteLLMWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">LiteLLMWrapperBase</span></code></a></p>
<p>The model wrapper based on litellm chat API.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<ul class="simple">
<li><p>litellm requires the users to set api key in their environment</p></li>
<li><p>Different LLMs requires different environment variables</p></li>
</ul>
</div>
<p class="rubric">示例</p>
<ul class="simple">
<li><p>For OpenAI models, set &quot;OPENAI_API_KEY&quot;</p></li>
<li><p>For models like &quot;claude-2&quot;, set &quot;ANTHROPIC_API_KEY&quot;</p></li>
<li><p>For Azure OpenAI models, you need to set &quot;AZURE_API_KEY&quot;,</p></li>
</ul>
<p>&quot;AZURE_API_BASE&quot; and &quot;AZURE_API_VERSION&quot;
- Refer to the docs in <a class="reference external" href="https://docs.litellm.ai/docs/">https://docs.litellm.ai/docs/</a> .</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>From <a class="reference external" href="https://docs.litellm.ai/docs/completion/output">https://docs.litellm.ai/docs/completion/output</a></p></li>
</ul>
<p><a href="#id54"><span class="problematic" id="id55">``</span></a><a href="#id56"><span class="problematic" id="id57">`</span></a>json
{</p>
<blockquote>
<div><dl>
<dt>'choices': [</dt><dd><dl>
<dt>{</dt><dd><p>'finish_reason': str,  # String: 'stop'
'index': int,  # Integer: 0
'message': {  # Dictionary [str, str]</p>
<blockquote>
<div><p>'role': str,  # String: 'assistant'
'content': str  # String: &quot;default message&quot;</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>],
'created': str,  # String: None
'model': str,  # String: None
'usage': {  # Dictionary [str, int]</p>
<blockquote>
<div><p>'prompt_tokens': int,  # Integer
'completion_tokens': int,  # Integer
'total_tokens': int  # Integer</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.LiteLLMChatWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'litellm_chat'</span></em><a class="headerlink" href="#mindpalace.models.LiteLLMChatWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.LiteLLMChatWrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/litellm_model.html#LiteLLMChatWrapper.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.LiteLLMChatWrapper.__init__" title="Link to this definition"></a></dt>
<dd><p>To use the LiteLLM wrapper, environment variables must be set.
Different model_name could be using different environment variables.
For example:</p>
<blockquote>
<div><ul class="simple">
<li><p>for model_name: &quot;gpt-3.5-turbo&quot;, you need to set &quot;OPENAI_API_KEY&quot;</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">os.environ[&quot;OPENAI_API_KEY&quot;]</span> <span class="pre">=</span> <span class="pre">&quot;your-api-key&quot;</span>
<span class="pre">`</span></code>
- for model_name: &quot;claude-2&quot;, you need to set &quot;ANTHROPIC_API_KEY&quot;
- for Azure OpenAI, you need to set &quot;AZURE_API_KEY&quot;,
&quot;AZURE_API_BASE&quot;, &quot;AZURE_API_VERSION&quot;</p>
</div></blockquote>
<p>You should refer to the docs in <a class="reference external" href="https://docs.litellm.ai/docs/">https://docs.litellm.ai/docs/</a></p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> (<cite>str</cite>) -- The name of the model config.</p></li>
<li><p><strong>model_name</strong> (<cite>str</cite>, default <cite>None</cite>) -- The name of the model to use in OpenAI API.</p></li>
<li><p><strong>stream</strong> (<cite>bool</cite>, default <cite>False</cite>) -- Whether to enable stream mode.</p></li>
<li><p><strong>generate_args</strong> (<cite>dict</cite>, default <cite>None</cite>) -- The extra keyword arguments used in litellm api generation,
e.g. <cite>temperature</cite>, <cite>seed</cite>.
For generate_args, please refer to
<a class="reference external" href="https://docs.litellm.ai/docs/completion/input">https://docs.litellm.ai/docs/completion/input</a>
for more details.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.LiteLLMChatWrapper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/litellm_model.html#LiteLLMChatWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.LiteLLMChatWrapper.format" title="Link to this definition"></a></dt>
<dd><p>A common format strategy for chat models, which will format the
input messages into a user message.</p>
<p>Note this strategy maybe not suitable for all scenarios,
and developers are encouraged to implement their own prompt
engineering strategies.</p>
<p>The following is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prompt1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Hi, how can I help you?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;What&#39;s the date today?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">prompt2</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Hi, how can I help you?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;What&#39;s the date today?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The prompt will be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># prompt1</span>
<span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Bob: Hi, how can I help you?</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;user: What&#39;s the date today?&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="c1"># prompt2</span>
<span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Bob: Hi, how can I help you?</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;user: What&#39;s the date today?&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted messages.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mindpalace.models.YiChatWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mindpalace.models.</span></span><span class="sig-name descname"><span class="pre">YiChatWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_p</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mindpalace/models/yi_model.html#YiChatWrapper"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.YiChatWrapper" title="Link to this definition"></a></dt>
<dd><p>基类：<a class="reference internal" href="mindpalace.models.model.html#mindpalace.models.model.ModelWrapperBase" title="mindpalace.models.model.ModelWrapperBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelWrapperBase</span></code></a></p>
<p>The model wrapper for Yi Chat API.</p>
<dl>
<dt>Response:</dt><dd><ul class="simple">
<li><p>From <a class="reference external" href="https://platform.lingyiwanwu.com/docs">https://platform.lingyiwanwu.com/docs</a></p></li>
</ul>
<p><a href="#id58"><span class="problematic" id="id59">``</span></a><a href="#id60"><span class="problematic" id="id61">`</span></a>json
{</p>
<blockquote>
<div><p>&quot;id&quot;: &quot;cmpl-ea89ae83&quot;,
&quot;object&quot;: &quot;chat.completion&quot;,
&quot;created&quot;: 5785971,
&quot;model&quot;: &quot;yi-large-rag&quot;,
&quot;usage&quot;: {</p>
<blockquote>
<div><p>&quot;completion_tokens&quot;: 113,
&quot;prompt_tokens&quot;: 896,
&quot;total_tokens&quot;: 1009</p>
</div></blockquote>
<p>},
&quot;choices&quot;: [</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><p>&quot;index&quot;: 0,
&quot;message&quot;: {</p>
<blockquote>
<div><p>&quot;role&quot;: &quot;assistant&quot;,
&quot;content&quot;: &quot;Today in Los Angeles, the weather ...&quot;,</p>
</div></blockquote>
<p>},
&quot;finish_reason&quot;: &quot;stop&quot;</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mindpalace.models.YiChatWrapper.model_type">
<span class="sig-name descname"><span class="pre">model_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'yi_chat'</span></em><a class="headerlink" href="#mindpalace.models.YiChatWrapper.model_type" title="Link to this definition"></a></dt>
<dd><p>The type of the model wrapper, which is to identify the model wrapper
class in model configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.YiChatWrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_p</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/mindpalace/models/yi_model.html#YiChatWrapper.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.YiChatWrapper.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the Yi chat model wrapper.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_name</strong> (<cite>str</cite>) -- The name of the configuration to use.</p></li>
<li><p><strong>model_name</strong> (<cite>str</cite>) -- The name of the model to use, e.g. yi-large, yi-medium, etc.</p></li>
<li><p><strong>api_key</strong> (<cite>str</cite>) -- The API key for the Yi API.</p></li>
<li><p><strong>max_tokens</strong> (<cite>Optional[int]</cite>, defaults to <cite>None</cite>) -- The maximum number of tokens to generate, defaults to <cite>None</cite>.</p></li>
<li><p><strong>top_p</strong> (<cite>float</cite>, defaults to <cite>0.9</cite>) -- The randomness parameters in the range [0, 1].</p></li>
<li><p><strong>temperature</strong> (<cite>float</cite>, defaults to <cite>0.3</cite>) -- The temperature parameter in the range [0, 2].</p></li>
<li><p><strong>stream</strong> (<cite>bool</cite>, defaults to <cite>False</cite>) -- Whether to stream the response or not.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mindpalace.models.YiChatWrapper.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mindpalace.message.msg.html#mindpalace.message.msg.Msg" title="mindpalace.message.msg.Msg"><span class="pre">Msg</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/mindpalace/models/yi_model.html#YiChatWrapper.format"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#mindpalace.models.YiChatWrapper.format" title="Link to this definition"></a></dt>
<dd><p>Format the messages into the required format of Yi Chat API.</p>
<p>Note this strategy maybe not suitable for all scenarios,
and developers are encouraged to implement their own prompt
engineering strategies.</p>
<p>The following is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prompt1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;system&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;Hi, how can I help you?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;assistant&quot;</span><span class="p">),</span>
    <span class="n">Msg</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;What&#39;s the date today?&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The prompt will be as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># prompt1</span>
<span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You&#39;re a helpful assistant&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;## Conversation History</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;Bob: Hi, how can I help you?</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;user: What&#39;s the date today?&quot;</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>args</strong> (<cite>Union[Msg, Sequence[Msg]]</cite>) -- The input arguments to be formatted, where each argument
should be a <cite>Msg</cite> object, or a list of <cite>Msg</cite> objects.
In distribution, placeholder is also allowed.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The formatted messages.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>List[dict]</cite></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="mindpalace.message.html" class="btn btn-neutral float-left" title="mindpalace.message" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="mindpalace.agents.html" class="btn btn-neutral float-right" title="mindpalace.agents" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2024, Alibaba Tongyi Lab。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>